var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var e=a[b];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(e||"")+"_"+b++,e)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,d={next:function(){if(e<a.length){var f=e++;return{value:b(f,a[f]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,e,d){if(b){e=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var f=a[d];f in e||(e[f]={});e=e[f]}a=a[a.length-1];d=e[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.findInternal=function(a,b,e){a instanceof String&&(a=String(a));for(var d=a.length,f=0;f<d;f++){var g=a[f];if(b.call(e,g,f,a))return{i:f,v:g}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6","es3");
var Area=function(a,b){this.door=a;this.x=null!=b.x?b.x:this.door.x+this.door.coupe.insertVar/2;this.y=null!=b.y?b.y:this.door.y+30;this.width=null!=b.width?b.width:this.door.width-this.door.coupe.insertVar;this.height=null!=b.height?b.height:this.door.height-60;this.panel=b.panel||0;this.rotateTexture=b.rotateTexture||0;this._before=null!=b._before?b._before:null;this._after=null!=b._after?b._after:null;this.aid=null!=b.aid?b.aid:Area._aid++;this.isParent=b.isParent||!1;this.parent=null!=b.parent?
b.parent:null;this.imageName=b.imageName||"";this.type=b.type||!1;this._first=null!=b._first?b._first:null;this._last=null!=b._last?b._last:null;this.div=null!=b.div?b.div:null};Area._aid=0;Area.prototype.rem=function(){for(var a in this.image)this.image[a].remove()};
Area.prototype.recalcChildren=function(a){var b,e;if("horiz"==this.type){var d=this.door.getTreeNode(this.aid);for(b in d){d=this.door.areas[b];d.y=this.y;d.height=this.height;d.render();if(d.div){var f=this.door.divs[d.div];f.y=this.y;f.height=this.height;f.render()}if(d.isParent)for(e in f=this.door.getTreeNode(d.aid),f)f=this.door.areas[e],1==f._first&&"after"==a&&(f.y=d.y,f.height=f.oheight+f.oy-d.y,f.render()),1==f._last&&"bef"==a&&(f.height=f.oheight+d.height-d.oheight,f.render()),f.isParent&&
f.recalcChildren(a)}}else if("vert"==this.type)for(b in d=this.door.getTreeNode(this.aid),d)if(d=this.door.areas[b],d.x=this.x,d.width=this.width,d.render(),d.div&&(f=this.door.divs[d.div],f.x=this.x,f.width=this.width,f.render()),d.isParent)for(e in f=this.door.getTreeNode(d.aid),f)f=this.door.areas[e],1==f._first&&"after"==a&&(f.x=d.x,f.width=f.owidth+f.ox-d.x,f.render()),1==f._last&&"bef"==a&&(f.width=f.owidth+d.width-d.owidth,f.render()),f.isParent&&f.recalcChildren(a)};
Area.prototype.resize=function(a,b){b-=this.height;a=Math.round(a-this.width);console.log(b,a);if("horiz"==this.type){if(0!=b)if(null!=this.div)this.door.divs[this.div].start(),this.door.divs[this.div].move(0,b/this.door.coupe.c);else if(null!=this.parent&&null!=this.door.areas[this.parent].parent&&null!=this.door.areas[this.door.areas[this.parent].parent].div){var e=this.door.areas[this.door.areas[this.parent].parent];this.door.divs[e.div].start();this.door.divs[e.div].move(0,b/this.door.coupe.c)}else e=
this.door.areas[this._before],this.door.divs[e.div].start(),this.door.divs[e.div].move(0,(0-b)/this.door.coupe.c);0!=a&&(b=a,null!=this.door.areas[this.parent].div?(this.door.divs[this.door.areas[this.parent].div].start(),this.door.divs[this.door.areas[this.parent].div].move(b/this.door.coupe.c,0)):null!=this.parent&&null!=this.door.areas[this.parent].parent&&null!=this.door.areas[this.door.areas[this.parent].parent].div?(e=this.door.areas[this.door.areas[this.parent].parent],this.door.divs[e.div].start(),
this.door.divs[e.div].move(b/this.door.coupe.c,0)):(e=this.door.areas[this._before],this.door.divs[e.div].start(),this.door.divs[e.div].move((0-b)/this.door.coupe.c,0)))}else"vert"==this.type&&(0!=b&&(null!=this.door.areas[this.parent].div?(this.door.divs[this.door.areas[this.parent].div].start(),this.door.divs[this.door.areas[this.parent].div].move(0,b/this.door.coupe.c)):null!=this.parent&&null!=this.door.areas[this.parent].parent&&null!=this.door.areas[this.door.areas[this.parent].parent].div?
(e=this.door.areas[this.door.areas[this.parent].parent],this.door.divs[e.div].start(),this.door.divs[e.div].move(0,b/this.door.coupe.c)):(e=this.door.areas[this._before],this.door.divs[e.div].start(),this.door.divs[e.div].move(0,(0-b)/this.door.coupe.c))),0!=a&&(b=a,null!=this.div?(this.door.divs[this.div].start(),this.door.divs[this.div].move(b/this.door.coupe.c,0)):null!=this.parent&&null!=this.door.areas[this.parent].parent&&null!=this.door.areas[this.door.areas[this.parent].parent].div?(e=this.door.areas[this.door.areas[this.parent].parent],
this.door.divs[e.div].start(),this.door.divs[e.div].move(b/this.door.coupe.c,0)):(console.log(this),e=this.door.areas[this._before],this.door.divs[e.div].start(),this.door.divs[e.div].move((0-b)/this.door.coupe.c,0))))};
Area.prototype.render=function(){var a=this.image||{},b=this.door.coupe;if(void 0==a._object||null==a._object.id)a._object=b.paper.rect(0,0,0,0).attr({fill:"grey",opacity:1,stroke:"black","stroke-width":1}),a.arrow=b.paper.path("M0,0").attr({stroke:"#"+b.colors[this.door.id],"stroke-width":1}),a.barrow=b.paper.path("M0,0").attr({stroke:"#"+b.colors[this.door.id],"stroke-width":1}),a.matBack=b.paper.rect(0,0,0,0).attr({height:75,fill:"white",opacity:1,stroke:"white"}),a.mat=b.paper.text(0,0,"").attr({"font-size":b.fontSize,
"text-anchor":"start"}),a.sTextBack=b.paper.rect(0,0,0,0).attr({width:100,height:75,fill:"white",stroke:"white"}),a.sText=b.paper.text(0,0,"").attr({"font-size":b.fontSize,cursor:"pointer","text-anchor":"start"}),a.bTextBack=b.paper.rect(0,0,0,0).attr({width:100,height:75,fill:"white",stroke:"white"}),a.bText=b.paper.text(0,0,"").attr({"font-size":b.fontSize,cursor:"pointer","text-anchor":"start"});if(0!==this.panel){a._object.attr({fill:'url("'+this.imageName+'")'});for(var e in insertList)if(insertList[e].goods_id==
this.panel){var d=insertList[e].name;break}a.mat.attr({text:d.slice(0,20)})}else a.mat.attr({text:this.aid});a.mat.attr({x:this.x+20,y:this.y+this.height/2});d=a.mat.getBBox().width?a.mat.getBBox().width:0;"vert"==this.type&&(d=a.mat.getBBox().height?a.mat.getBBox().height:0,a.mat.transform("r90,"+(this.x+this.width/2)+","+(this.y+this.height/2)),a.matBack.transform("r90,"+(this.x+this.width/2)+","+(this.y+this.height/2)));a.matBack.attr({x:this.x+20,y:this.y+this.height/2-30,width:d});a._object.attr({x:this.x,
y:this.y,width:this.width,height:this.height});a.arrow.attr({path:this.horizArrPath()});a.sText.attr({x:b.posx+120+b.recPwidth+100*this.door.id,y:this.y+this.height/2,text:this.height}).transform("r90,"+(b.posx+160+b.recPwidth+100*this.door.id)+","+(this.y+this.height/2));a.sTextBack.attr({x:a.sText.getBBox().x,y:a.sText.getBBox().y,width:a.sText.getBBox().width,height:a.sText.getBBox().height});a.barrow.attr({path:this.vertArrPath()});a.bText.attr({x:this.x+this.width/2-parseFloat(b.fontSize),y:b.posy+
b.pheight+165,text:this.width.toFixed(2)});a.bTextBack.attr({x:a.bText.getBBox().x,y:a.bText.getBBox().y,width:a.bText.getBBox().width,height:a.bText.getBBox().height});this.isParent&&(a._object.remove(),a.mat.remove(),a.matBack.remove(),a._object.remove(),a.arrow.remove(),a.sText.remove(),a.sTextBack.remove(),a.barrow.remove(),a.bTextBack.remove(),a.bText.remove());this.image=a};
Area.prototype.horizArrPath=function(){var a=this.door.coupe;return"M"+(a.posx+65+a.recPwidth+100*this.door.id)+","+(this.y+this.height)+"l100,0m 15,-15l -30,30m 15,-15l 0,-"+this.height+",0m 15,-15l -30,30m 15,-15l -100,0"};Area.prototype.vertArrPath=function(){var a=this.door.coupe;return"M"+this.x+","+(a.posy+a.pheight+65)+"l 0, 100m 15,-15l -30,30m 15,-15l "+this.width+",0m 15,-15l -30,30m 15,-15l 0, -100"};var cp=function(){var a=function(){this.posy=this.posx=200;this.pheight=2500;this.pwidth=3200;this.gnuSize=1;this.varWidth=26.1;this.insertVar=35;this.horizVar=50;this.type=18;this.color=22;this.gnu=53;this.checker=this.picture=this.stub=this.dov=!1;this.numDoors=3;this.doorWidth=(this.pwidth+this.varWidth*(this.numDoors-1))/this.numDoors;this.recPwidth=this.doorWidth*this.numDoors;this.container=$("#svgCont");this.paper=new Raphael(this.container[0]);this.doors=[];this.colors="FF0000 8000FF FF8000 FF0080 80FF00 80FF00 80FF00 80FF00 80FF00 80FF00 80FF00 80FF00 00FFFF".split(" ")};
a.prototype.init=function(){var a=document.getElementById("topMenu");this.menu=new Menu(this,a,menuStruct);this.menu.init();a.addEventListener("menuUpdated",this.recalc.bind(this));a.addEventListener("menuReset",this.reset.bind(this));this.container.on("click",this.handleClickEvent.bind(this));a=JSON.parse(window.localStorage.getItem("COUPE"));if(null!==a)this.menu.height(a.pheight),this.menu.width(a.pwidth),this.menu.calcNumDoors(),this.menu.numDoors(a.numDoors),this.menu.type(a.type),this.menu.color(a.color),
this.menu.divType(a.gnu),this.menu.dov(a.dov),this.menu.stub(a.stub),this.menu.picture(a.picture),this.getConfig(),this.load(JSON.parse(JSON.stringify(a)));else for(this.getConfig(),a=0;a<this.numDoors;a++){var e=this.addDoor(a);e.addArea({type:"root"});e.tree={};e.tree[a]={};e.render()}this.render()};a.prototype.load=function(a){var b,d=[];for(b in a.doors){var f=a.doors[b];void 0===this.doors[b]&&this.addDoor(b);this.doors[b].clear();this.doors[b].divs=f.divs;this.doors[b].areas=f.areas;this.doors[b].tree=
f.tree;for(var g in f.areas)d.push(f.areas[g].aid);(f=this.doors[b].recalc(f.width))&&this.doors[b].render()}Area._aid=1+Math.max.apply(null,d)};a.prototype.handleDelDiv=function(a){this.getDivByRaphId(a).del()};a.prototype.handleDoorCopy=function(a){a=this.getDoorByRaphId(a).save();for(var b in this.doors)this.doors[b].clone(a)};a.prototype.handleAddInsert=function(a,e,d,f){a=this.getAreaByRaphId(a);if(void 0===e)return!1;a.panel=d;a.rotateTexture=f?1:0;switch(+e){case 10:case 9:case 56:case 54:a.imageName=
a.rotateTexture?"images/glass90.png":"images/glass.png";break;default:a.imageName=a.rotateTexture?"images/mat.png":"images/mat90.png"}a.render()};a.prototype.handleNewSize=function(a,e,d){if(isNaN(e)||isNaN(d))return!1;this.getAreaByRaphId(a).resize(e,d)};a.prototype.handleNewDoorWidth=function(a,e){if(isNaN(e))return!1;a=this.getDoorByRaphId(a);a.recalc(e);a.render()};a.prototype.handleClickEvent=function(a){this.menu.conMenu.hide();var b=this.menu.activeDiv();a.target.raphael&&null!=b?this.handleAddDiv(a,
b):this.getDoorByRaphId(a.target.raphaelid)};a.prototype.handleAddDiv=function(a,e){var b=this.getAreaByRaphId(a.target.raphaelid);if(!b)return console.log("area not found: "+a.target.raphaelid),!1;b.door.divide(Math.round(a.originalEvent.layerX*this.c),Math.round(a.originalEvent.layerY*this.c),e,b.aid);return!0};a.prototype.getAreaByRaphId=function(a){for(var b=0;b<this.doors.length;b++){var d=this.doors[b],f;for(f in d.areas){var g=d.areas[f];if(g.image&&g.image._object.id==a)return g}}return null};
a.prototype.getDoorByRaphId=function(a){for(var b=0;b<this.doors.length;b++){var d=this.doors[b],f;for(f in d.areas){var g=d.areas[f];if(g.image&&g.image._object.id==a)return d}}return null};a.prototype.getDivByRaphId=function(a){for(var b=0;b<this.doors.length;b++){var d=this.doors[b],f;for(f in d.divs){var g=d.divs[f];if(g.image._object.id==a)return g}}return null};a.prototype.addDoor=function(a){this.doors[a]=new Door(this,a);return this.doors[a]};a.prototype.remDoor=function(a){this.doors[a].rem();
delete this.doors[a];this.doors.splice(a,1);return 1};a.prototype.render=function(){var a=document.getElementById("svgCont");a.style.width=this.paperWidth+"px";a.style.height=this.paperHeight+"px";this.paper.setSize(this.paperWidth,this.paperHeight);this.paper.setViewBox(0,0,this.recPwidth+850,this.pheight+500,!0);this.paper.canvas.setAttribute("preserveAspectRatio","xMinYMin");this.paper.canvas.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");a=this.image||{};if(void 0==a.boxPath||null==
a.boxPath.id)a.boxPath=this.paper.path("M0,0").attr({fill:"#f9f9f1","fill-rule":"nonzero","stroke-width":1}),a.arrowPath=this.paper.path("M0,0").attr({"stroke-width":1}),a.topTextBox=this.paper.rect(0,0,0,0).attr({fill:"white",stroke:"white"}),a.topText=this.paper.text(0,0,"").attr({"font-size":this.fontSize,"text-anchor":"start"}),a.leftTextBox=this.paper.rect(0,0,0,0).attr({fill:"white",stroke:"white"}),a.leftText=this.paper.text(0,0,"").attr({"font-size":this.fontSize,"text-anchor":"start"});var e=
"M "+(this.posx-65)+","+(this.posy+this.pheight)+"l -50, 0m 15,-15 l -30,30 m 15,-15l 0, -"+this.pheight+" m 15,-15 l -30,30 m 15,-15l 50,0 m 65,-65 l 0,-120 m 15,-15 l -30,30 m 15,-15l "+this.recPwidth+",0m 15,-15 l -30,30 m 15,-15l 0,120";a.boxPath.attr({path:"M "+this.posx+","+this.posy+"l 0, "+this.pheight+"l "+this.recPwidth+", 0l 0, -"+this.pheight+"l -"+this.recPwidth+", 0m -65, -65l "+(this.recPwidth+130)+", 0l 0, "+(this.pheight+130)+"l -"+(this.recPwidth+130)+",0l 0, -"+(this.pheight+130)+
" z"});a.arrowPath.attr({path:e});a.topText.attr({x:this.posx+this.recPwidth/2,y:20,text:this.pwidth});a.topTextBox.attr({x:a.topText.getBBox().x,y:a.topText.getBBox().y,width:a.topText.getBBox().width,height:a.topText.getBBox().height});a.leftText.attr({x:20,y:this.posy+this.pheight/2,text:this.pheight});a.leftTextBox.attr({x:a.leftText.getBBox().x,y:a.leftText.getBBox().y,width:a.leftText.getBBox().width,height:a.leftText.getBBox().height});this.image=a};a.prototype.save=function(){var a={pheight:this.pheight,
pwidth:this.pwidth,gnuSize:this.gnuSize,varWidth:this.varWidth,insertVar:this.insertVar,horizVar:this.horizVar,type:this.type,color:this.color,gnu:this.gnu,dov:this.dov,stub:this.stub,picture:this.picture,svg:this.container.html(),checker:this.checker,numDoors:this.numDoors,doors:[]};console.log(a);var e,d,f;for(e=0;e<this.doors.length;e++){var g=this.doors[e];a.doors[e]={x:g.x,y:g.y,width:g.width,height:g.height,divs:{},areas:{},tree:g.tree};for(d in g.divs){var l=g.divs[d];a.doors[e].divs[d]={};
for(f in l)"door"!=f&&"image"!=f&&(a.doors[e].divs[d][f]=l[f])}for(d in g.areas)for(f in l=g.areas[d],a.doors[e].areas[d]={},l)"door"!=f&&"image"!=f&&(a.doors[e].areas[d][f]=l[f])}return a};a.prototype.getConfig=function(){var a=this.menu.config();this.pheight=a.pheight||2600;this.pwidth=a.pwidth||3200;this.gnuSize=a.gnuSize||1;this.varWidth=a.varWidth||26.1;this.horizVar=a.horizVar||50;this.insertVar=a.insertVar||35;this.type=a.type||18;this.color=a.color||22;this.gnu=a.gnu||53;this.dov=a.dov||!1;
this.stub=a.stub||!1;this.picture=a.picture||!1;this.checker=a.checker;this.numDoors=a.numDoors;1==a.numDoors?(this.numDoors=a.numDoors,this.doorWidth=(this.pwidth+this.varWidth)/2,this.recPwidth=2*this.doorWidth):(this.doorWidth="true"==this.checker?(this.pwidth+this.numDoors/2*this.varWidth)/this.numDoors:(this.pwidth+this.varWidth*(this.numDoors-1))/this.numDoors,this.recPwidth=this.doorWidth*this.numDoors);this.paperWidth=this.recPwidth/5+400;this.paperHeight=this.pheight/5+400;this.c=(this.recPwidth+
850)/this.paperWidth;this.fontSize=15*this.c+"px"};a.prototype.recalc=function(){var a=this.numDoors,e;this.getConfig();if(a<this.numDoors)for(e=0;e<this.numDoors;e++){if(e>=a){var d=this.addDoor(e);var f=d.addArea({type:"root"});d.tree={};d.tree[f.aid]={};d.render()}}else if(a>this.numDoors)for(e=this.doors.length-1;e>=this.numDoors;e--)this.remDoor(e);for(e in this.doors)this.doors[e].clear(),this.doors[e].recalc(),this.doors[e].render();this.render()};a.prototype.reset=function(){this.getConfig();
this.paper.clear();this.image={};Area._aid=0;Divider._divId=0;this.doors=[];for(var a=0;a<this.numDoors;a++){var e=this.addDoor(a);e.addArea({type:"root"});e.tree={};e.tree[a]={};e.render()}this.render()};return new a}();var Divider=function(a,b,e,d,f){this.divThick=20;this.type=d;this.door=e.door;this.did=Divider._divId++;null!=f&&(this.did=f);"horiz"==d?(this.x=e.x,this.y=null!=b?b-this.divThick:e.y+e.height-this.divThick/2,this.height=this.divThick,this.width=e.width):"vert"==d&&(this.x=null!=a?a-this.divThick:e.x+e.width-this.divThick/2,this.y=e.y,this.width=this.divThick,this.height=e.height);return this};Divider._divId=0;Divider.prototype.rem=function(){for(var a in this.image)this.image[a].remove()};
Divider.prototype.del=function(){var a=this.door.getAreaByDivId(this.did),b;null!=a._after&&(b=this.door.areas[a._after]);if(a.isParent&&b.isParent){console.log("we have 2 parents - go down");"horiz"==this.type?(a.height+=b.height+this.door.coupe.gnuSize,this.y+=b.height+this.door.coupe.gnuSize,this.render()):"vert"==this.type&&(a.width+=b.width+this.door.coupe.gnuSize,this.x+=b.width+this.door.coupe.gnuSize,this.render());var e=function(a,b){var d;for(d in b){var f=b[d];null!=a.door.areas[d].div&&
(a.door.divs[a.door.areas[d].div].rem(),delete a.door.divs[a.door.areas[d].div]);a.door.areas[d].rem();delete a.door.areas[d];0!=Object.keys(f).length&&e(a,a.door.getTreeNode(d))}};a._last=b._last;a._after=b._after;var d=a.parent;var f=this.door.getTreeNode(d);d=this.door.areas[d];this.door.divs[b.div].rem();delete this.door.divs[b.div];b.rem();var g=this.door.getTreeNode(b.aid);a.recalcChildren("bef");e(this,g);delete this.door.areas[b.aid];delete f[b.aid];d.render()}else if(a.isParent&&!b.isParent)console.log("top parent, bottom clean - go down"),
"horiz"==this.type?(a.height+=b.height+this.door.coupe.gnuSize,this.y+=b.height+this.door.coupe.gnuSize,this.render()):"vert"==this.type&&(a.width+=b.width+this.door.coupe.gnuSize,this.x+=b.width+this.door.coupe.gnuSize,this.render()),d=a.parent,f=this.door.getTreeNode(d),2==Object.keys(f).length?(console.log("Leaving one and moving up the tree"),d=this.door.areas[d],this.door.divs[a.div].rem(),delete this.door.divs[a.div],b.rem(),delete this.door.areas[b.aid],delete f[b.aid],a.recalcChildren("bef"),
d._first=null,d._last=null,d.render()):(a._last=b._last,a._after=b._after,b.div?(this.door.divs[b.div].rem(),delete this.door.divs[b.div]):(this.door.divs[a.div].rem(),delete this.door.divs[a.div]),a.render(),a.recalcChildren("bef"),b.rem(),delete f[b.aid],delete this.door.areas[b.aid]);else if(!a.isParent&&b.isParent)if(console.log("bottom parent, top clean - go up"),"horiz"==this.type?(b.height+=a.height+this.door.coupe.gnuSize,b.y-=a.height+this.door.coupe.gnuSize):"vert"==this.type&&(b.width+=
a.width+this.door.coupe.gnuSize,b.x-=a.width+this.door.coupe.gnuSize),this.door.divs[a.div].rem(),delete this.door.divs[a.div],d=a.parent,f=this.door.getTreeNode(d),2==Object.keys(f).length){console.log("Leaving one and moving up the tree");d=this.door.areas[d];a.rem();delete this.door.areas[a.aid];delete f[a.aid];try{d.recalcChildren("after")}catch(l){console.log(l)}d._first=null;d._last=null;d.render()}else b._first=a._first,b._before=a._before,b.render(),b.recalcChildren("after"),a.rem(),delete f[a.aid],
delete this.door.areas[a.aid];else a.isParent||b.isParent||(console.log("no parrents - go down"),"horiz"==this.type?(a.height+=b.height+this.door.coupe.gnuSize,this.y+=b.height+this.door.coupe.gnuSize,this.render()):"vert"==this.type&&(a.width+=b.width+this.door.coupe.gnuSize,this.x+=b.width+this.door.coupe.gnuSize,this.render()),d=b.parent,f=this.door.getTreeNode(d),2==Object.keys(f).length?(console.log("Leaving one"),d=this.door.areas[d],d.isParent=!1,this.door.divs[a.div].rem(),delete this.door.divs[a.div],
a.rem(),b.rem(),delete this.door.areas[a.aid],delete this.door.areas[b.aid],delete f[a.aid],delete f[b.aid],null==d.parent&&(d.type="root"),d._first=null,d._last=null,d.render()):(a._last=b._last,a._after=b._after,b.div?(this.door.divs[b.div].rem(),delete this.door.divs[b.div]):(this.door.divs[a.div].rem(),delete this.door.divs[a.div]),a.render(),b.rem(),delete f[b.aid],delete this.door.areas[b.aid]));this.door.divsToFront()};
Divider.prototype.start=function(a,b,e){var d;this.ox=this.x;this.oy=this.y;a=this.door.getAreaByDivId(this.did);var f;null!=a._after&&(f=this.door.areas[a._after]);this.bef=a.aid;this.aft=f.aid;for(d in this.door.areas)a=this.door.areas[d],a.ox=a.x,a.oy=a.y,a.owidth=a.width,a.oheight=a.height;for(d in this.door.divs)a=this.door.divs[d],a.image._object.attr("fill","black");this.image._object.attr("fill","green")};
Divider.prototype.move=function(a,b,e,d,f){f=this.door.coupe;"horiz"==this.type?(this.y=this.oy+Math.round(b*f.c),this.render(),e=this.door.areas[this.bef],d=this.door.areas[this.aft],e.x=e.ox,e.y=e.oy,e.height=e.oheight+Math.round(b*f.c),e.width=e.owidth,e.render(),e.isParent&&e.recalcChildren("bef"),d.x=d.ox,d.y=d.oy+Math.round(b*f.c),d.height=d.oheight-Math.round(b*f.c),d.width=d.owidth,d.render(),d.isParent&&d.recalcChildren("after")):"vert"==this.type&&(this.x=this.ox+Math.round(a*f.c),this.render(),
e=this.door.areas[this.bef],d=this.door.areas[this.aft],e.x=e.ox,e.y=e.oy,e.height=e.oheight,e.width=e.owidth+Math.round(a*f.c),e.render(),e.isParent&&e.recalcChildren("bef"),d.x=d.ox+Math.round(a*f.c),d.y=d.oy,d.height=d.oheight,d.width=d.owidth-Math.round(a*f.c),d.render(),d.isParent&&d.recalcChildren("after"))};Divider.prototype.end=function(){};
Divider.prototype.render=function(){var a=this.image||{};void 0==a._object&&(a._object=this.door.coupe.paper.rect(0,0,0,0).attr({fill:"#000000",cursor:"pointer"}).drag(this.move,this.start,this.end,this,this,this));a._object.attr({x:this.x,y:this.y,width:this.width,height:this.height});this.image=a};var Door=function(a,b){this.coupe=a;this.y=this.coupe.posy+20;this.x=this.coupe.doorWidth*b+this.coupe.posx;this.width=this.coupe.doorWidth;this.height=this.coupe.pheight-40;this.areas={};this.divs={};this.tree={};this.id=b};Door.prototype.addArea=function(a){a=new Area(this,a);return this.areas[a.aid]=a};Door.prototype.getArea=function(a){return this.areas[a]};Door.prototype.getTreeNode=function(a){function b(a,d){for(var f in a){var e=a[f];if(f==d||(e=b(e,d)))return e}}return b(this.tree,a)};
Door.prototype.divide=function(a,b,e,d){var f=this.getArea(d);"root"==f.type&&(f.type="horiz"==e?"vert":"horiz",f.isParent=!0,this.tree[d]={});var g=new Divider(a,b,f,e);this.divs[g.did]=g;"horiz"==e?(d=this.addArea({x:f.x,y:f.y,height:b-f.y-this.coupe.gnuSize,width:f.width,panel:f.panel,rotateTexture:f.rotateTexture,imageName:f.imageName}),a=this.addArea({x:f.x,y:b,height:f.height-d.height-this.coupe.gnuSize,width:f.width})):(d=this.addArea({x:f.x,y:f.y,height:f.height,width:a-Math.round(f.x)-this.coupe.gnuSize,
panel:f.panel,rotateTexture:f.rotateTexture,imageName:f.imageName}),a=this.addArea({x:a,y:f.y,height:f.height,width:f.width-d.width-this.coupe.gnuSize}));d.type=e;a.type=e;f.type==e?(b=f.parent,e=this.getTreeNode(b),e[d.aid]={},e[a.aid]={},d.parent=b,a.parent=b,a._last=f._last,d._first=f._first,this.areas[f._before]&&(this.areas[f._before]._after=d.aid),d._before=f._before,d._after=a.aid,a._after=f._after,a._before=d.aid,d.div=g.did,a.div=f.div,f.rem(),delete e[f.aid],delete this.areas[f.aid]):(f.isParent=
!0,e=this.getTreeNode(f.aid),e[d.aid]={},e[a.aid]={},d.parent=f.aid,a.parent=f.aid,d._first=!0,a._last=!0,d._before=null,d._after=a.aid,a._after=null,a._before=d.aid,d.div=g.did,a.div=null,f.rem());g.render();d.render();a.render();this.divsToFront()};Door.prototype.clear=function(){for(var a in this.areas)this.areas[a].rem();for(a in this.divs)this.divs[a].rem()};
Door.prototype.clone=function(a){var b,e,d={};this.clear();this.areas=JSON.parse(JSON.stringify(a.areas));this.divs=JSON.parse(JSON.stringify(a.divs));var f=function(a,b,e){var g,p={};for(g in b){var n=Area._aid++;var l=e[g];a.areas[n]=JSON.parse(JSON.stringify(l));a.areas[n].aid=n;d[g]=n;delete a.areas[g];0!=Object.keys(b[g]).length?(p[n]={},p[n]=f(a,b[g],e)):p[n]={}}return p};this.tree=f(this,a.tree,a.areas);for(b in d)for(e in this.areas){var g=this.areas[e];g._before==b&&(g._before=d[b]);g._after==
b&&(g._after=d[b]);g.parent==b&&(g.parent=d[b])}this.recalc(a.width);this.render()};Door.prototype.save=function(){var a,b;var e={x:this.x,y:this.y,width:this.width,height:this.height,divs:{},areas:{},tree:this.tree};for(a in this.divs){var d=this.divs[a];e.divs[a]={};for(b in d)"door"!=b&&"image"!=b&&(e.divs[a][b]=d[b])}for(a in this.areas)for(b in d=this.areas[a],e.areas[a]={},d)"door"!=b&&"image"!=b&&(e.areas[a][b]=d[b]);return JSON.parse(JSON.stringify(e))};
Door.prototype.recalc=function(a){function b(a,d,e,f,g,l,u,v){var p,n;for(p in d){var h=a.areas[p];if("horiz"==h.type){if(1==h._first){h.x=e;h.width=g;h.y=f;h.height=Math.round(h.height*v);if(null!=h.div){var m=new Divider(null,null,h,h.type,a.divs[h.div].did);a.divs[m.did]=m}var q=h._after;var r=h.height;for(n=h.y;null!=q;q=k._after,r=k.height,n=k.y){var k=a.areas[q];k.x=e;k.width=g;k.y=n+r+a.coupe.gnuSize;k.height=1!=k._last?Math.round(k.height*v):f+l-k.y;null!=k.div&&(m=new Divider(null,null,k,
k.type,a.divs[k.div].did),a.divs[m.did]=m)}}}else if("vert"==h.type&&1==h._first){h.x=e;h.width=Math.round(h.width*u);h.y=f;h.height=l;null!=h.div&&(m=new Divider(null,null,h,h.type,a.divs[h.div].did),a.divs[m.did]=m);q=h._after;var t=h.width;for(m=h.x;null!=q;q=k._after,t=k.width,m=k.x)k=a.areas[q],k.y=f,k.height=l,k.x=m+t+a.coupe.gnuSize,k.width=1!=k._last?Math.round(k.width*u):e+g-k.x,null!=k.div&&(m=new Divider(null,null,k,k.type,a.divs[k.div].did),a.divs[m.did]=m)}1==h.isParent&&(m=h.x,n=h.y,
t=h.width,r=h.height,b(a,d[p],m,n,t,r,u,v))}}var e=this.y,d=this.width,f=this.height;this.y=this.coupe.posy+20;this.x=this.coupe.doorWidth*this.id+this.coupe.posx;this.width=a||this.coupe.doorWidth;this.height=this.coupe.pheight-40;a=this.width/d;f=this.height/f;var g=function(a,b){var d;for(d in b){var e=b[d];a.addArea(a.areas[d]);0!=Object.keys(e).length&&g(a,e)}};this.tree&&void 0==this.areas[Object.keys(this.tree)[0]].image?g(this,this.tree):this.clear();for(var l in this.tree)d=this.areas[l],
d.x=this.x+this.coupe.insertVar/2,d.y=d.y-e+this.y,d.width=this.width-this.coupe.insertVar,d.height=this.height-60,b(this,this.tree[l],d.x,d.y,d.width,d.height,a,f);return!0};Door.prototype.rem=function(){var a,b;for(a in this.areas){var e=this.areas[a];for(b in e.image)e.image[b].remove();delete this.areas[a]}for(a in this.divs){e=this.divs[a];for(b in e.image)e.image[b].remove();delete this.divs[a]}for(b in this.image)this.image[b].remove()};
Door.prototype.divsToFront=function(){for(var a in this.divs){var b=this.divs[a];b&&b.image._object.toFront()}};Door.prototype.getAreaByDivId=function(a){for(var b in this.areas)if(this.areas[b].div==a)return this.areas[b];return null};
Door.prototype.render=function(){var a=this.image||{},b=this.coupe;void 0==a._object&&(a._object=b.paper.path("M0,0").attr({"stroke-width":1}),a.bottomArrow=b.paper.path("M0,0").attr({stroke:"#"+b.colors[this.id],"stroke-width":1}),a.bottomArrowTextbg=b.paper.rect(0,0,0,0).attr({fill:"white",stroke:"white"}),a.bottomArrowText=b.paper.text(0,0,"").attr({"font-size":b.fontSize,"text-anchor":"start"}));a._object.attr({path:"M "+this.x+","+this.y+" l "+this.width+", 0 l 0, "+this.height+" l "+-this.width+
", 0 l 0, "+-this.height+"m "+this.coupe.insertVar/2+", 30l "+(this.width-this.coupe.insertVar)+", 0l 0, "+(this.height-60)+"l -"+(this.width-this.coupe.insertVar)+", 0l 0, -"+(this.height-60)+" z"});a.bottomArrow.attr({path:"M "+this.x+","+(b.posy-65)+"l0,-50m15,-15l-30,30m15,-15l"+this.width+",0m15,-15l-30,30m15,-15l0,50"});a.bottomArrowText.attr({x:this.x+this.width/2-75,y:b.posy-120,text:this.width.toFixed(2)});a.bottomArrowTextbg.attr({x:a.bottomArrowText.getBBox().x,y:a.bottomArrowText.getBBox().y,
width:a.bottomArrowText.getBBox().width,height:a.bottomArrowText.getBBox().height});this.image=a;for(var e in this.areas)this.areas[e].render();for(e in this.divs)this.divs[e].render();this.divsToFront()};var aristoData={},c=new Core;$(document).ready(function(){cp.init();$("#doorInsertMod").find(".filterQuery").on("keyup",function(){$("#doorInsertMod").find(".insertList").html(filterInsertList($(this).val()))}).keyup()});
var filterInsertList=function(a){var b="";void 0===a&&(a="*");if(void 0===insertList)return!1;for(var e in insertList){var d=a.replace("*",".").split(".").join(".*");insertList[e].name.match(new RegExp(d,"ig"))&&(b+='<option class="'+insertList[e].goods_id+'" value='+insertList[e].goods_id+' data-thick="'+insertList[e].thick+'" data-type="'+insertList[e].goods_type+'" data-item="'+e+'" data-image="'+insertList[e].image+'">'+insertList[e].netinfo_code+" - "+insertList[e].name+"</option>")}return b};var Menu=function(a,b,e){this.node=b;this.menuStruct=e;this.parent=a;this.conMenu=$('<ul id="sideMenu" style="border-radius: 4px;font-size: 12px; position: absolute; background: #fff; display:none" class="nav nav-tabs nav-stacked">\n</ul>').appendTo("body");this.activeId=null;this.insertsMod=$("#doorInsertMod");this.sizeMod=$("#sizesPopMod");this.doorWidthMod=$("#doorWidthMod");this.activeDivType=null;this.updateEv=new Event("menuUpdated",{bubbles:!0,cancelable:!0});this.resetEv=new Event("menuReset",
{bubbles:!0,cancelable:!0});this.node.querySelector(".pheight").value=2600;this.node.querySelector(".pwidth").value=3200;a="";for(var d in this.menuStruct)b=this.menuStruct[d],a+='<option value="'+d+'" data-var="'+b.variable+'" data-insert="'+b.insertDiff+'" data-horiz="'+b.horizDiff+'">'+b.name+"</option>";this.node.querySelector(".gpType").innerHTML=a;this.activeDiv=function(){return this.activeDivType};this.type=function(a){if(void 0!==a)this.node.querySelector(".gpType").value=a;else return this.node.querySelector(".gpType").value};
this.color=function(a){var b=this.node.querySelector(".gpColor");if(void 0!==a)b.value=a;else return b.value};this.divType=function(a){var b=this.node.querySelector(".divType");if(void 0!==a)b.value=a;else return b.value};this.dov=function(a){var b=this.node.querySelector(".dov");if(void 0!==a)b.checked=a;else return b.checked};this.stub=function(a){var b=this.node.querySelector(".stub");if(void 0!==a)b.checked=a;else return b.checked};this.picture=function(a){var b=this.node.querySelector(".picture");
if(void 0!==a)b.checked=a;else return b.checked};this.height=function(a){var b=this.node.querySelector(".pheight");if(void 0!==a)b.value=a;else return b.value};this.width=function(a){var b=this.node.querySelector(".pwidth");if(void 0!==a)b.value=a;else return b.value};this.numDoors=function(a){var b=this.node.querySelector(".numDoors");if(void 0!==a)b.value=a;else return b.value};this.isChecker=function(){var a=this.node.querySelector(".numDoors");return a.options[a.selectedIndex].getAttribute("data-checker")};
this.varWidth=function(){var a=this.node.querySelector(".gpType");return a.options[a.selectedIndex].getAttribute("data-var")};this.insertVar=function(){var a=this.node.querySelector(".gpType");return a.options[a.selectedIndex].getAttribute("data-insert")};this.horizVar=function(){var a=this.node.querySelector(".gpType");return a.options[a.selectedIndex].getAttribute("data-horiz")}};
Menu.prototype.init=function(){this.calcNumDoors();this.node.addEventListener("click",this.clickEventHandler.bind(this));this.node.addEventListener("change",this.changeEventHandler.bind(this));this.node.addEventListener("keyup",this.keyupEventHandler.bind(this));this.node.querySelector(".gpType").dispatchEvent(new Event("change",{bubbles:!0}));document.getElementById("save").addEventListener("click",this.saveOrder.bind(this));document.getElementById("reset").addEventListener("click",this.resetOrder.bind(this));
document.addEventListener("click",this.menusOff.bind(this));this.conMenu[0].addEventListener("click",this.conMenuEventHandler.bind(this));this.sizeMod[0].addEventListener("click",this.changeSizeHandler.bind(this));this.sizeMod[0].addEventListener("keyup",this.changeSizeHandler.bind(this));this.doorWidthMod[0].addEventListener("click",this.changeDoorWidthHandler.bind(this));this.doorWidthMod[0].addEventListener("keyup",this.changeDoorWidthHandler.bind(this));this.insertsMod[0].addEventListener("click",
this.changeInsertHandler.bind(this));this.insertsMod[0].addEventListener("dblclick",this.changeInsertHandler.bind(this));this.parent.container.on("contextmenu dblclick",this.handleContextmenuEvent.bind(this))};
Menu.prototype.handleContextmenuEvent=function(a){if("rect"===a.target.localName){var b=this.parent.getAreaByRaphId(a.target.raphaelid),e=this.parent.getDivByRaphId(a.target.raphaelid);if(b||e)if(a.preventDefault(),a.stopPropagation(),b){if("dblclick"===a.type)return this.activeId=a.target.raphaelid,this.insertsMod.modal("show"),!0;this.contextMenu(a,"area",a.target.raphaelid)}else this.contextMenu(a,"div",a.target.raphaelid);else return!1}};
Menu.prototype.conMenuEventHandler=function(a){a.preventDefault();"A"===a.target.tagName&&(a=a.target,a.classList.contains("menuSize")?(a=this.parent.getAreaByRaphId(this.activeId),this.sizeMod.find(".manualHeight").val(a.height.toFixed(0)),this.sizeMod.find(".manualWidth").val(a.width.toFixed(0)),this.sizeMod.modal("show")):a.classList.contains("menuInsert")?this.insertsMod.modal("show"):a.classList.contains("menuCopy")?this.parent.handleDoorCopy(this.activeId):a.classList.contains("delDiv")?this.parent.handleDelDiv(this.activeId):
a.classList.contains("doorWidth")&&(a=this.parent.getDoorByRaphId(this.activeId),this.doorWidthMod[0].querySelector(".width").value=a.width.toFixed(2),this.doorWidthMod.modal("show")))};
Menu.prototype.changeInsertHandler=function(a){if(a.target.classList.contains("doorInsertSet")||"dblclick"==a.type&&"OPTION"==a.target.tagName){var b=this.insertsMod[0].querySelector(".insertList");a=b.options[b.selectedIndex].value;b=b.options[b.selectedIndex].getAttribute("data-type");var e=this.insertsMod[0].querySelector(".rotateTexture").checked;this.parent.handleAddInsert(this.activeId,b,a,e);this.insertsMod.modal("hide")}};
Menu.prototype.changeSizeHandler=function(a){if(a.target.classList.contains("setSizes")||13==a.which){a=+this.sizeMod[0].querySelector(".manualWidth").value;var b=+this.sizeMod[0].querySelector(".manualHeight").value;this.parent.handleNewSize(this.activeId,a,b);this.sizeMod.modal("hide")}};
Menu.prototype.changeDoorWidthHandler=function(a){if(a.target.classList.contains("setWidth")||13==a.which){a=this.doorWidthMod[0].querySelector(".width");var b=+a.value;if(isNaN(b)||1250<b||400>b)return a.parentNode.classList.add("error"),!1;this.parent.handleNewDoorWidth(this.activeId,b);this.doorWidthMod.modal("hide")}};Menu.prototype.menusOff=function(a){this.conMenu.hide();"rect"===a.target.nodeName&&3!==a.which||this.resetDiv()};
Menu.prototype.contextMenu=function(a,b,e){var d=a.pageX,f=a.pageY;this.activeId=e;this.menusOff(a);return void 0===e||"area"!==b&&"div"!==b?!1:(this.conMenu.html(""),"area"===b?$('<li style="border-radius: 4px;"><a href="#" class="menuSize">\u0420\u0430\u0437\u043c\u0435\u0440</a> </li>\n<li style="border-radius: 4px;"><a href="#" class="menuInsert">\u0412\u0441\u0442\u0430\u0432\u043a\u0430</a> </li>\n<li style="border-radius: 4px;"><a href="#" class="menuCopy">\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a> </li>\n<li style="border-radius: 4px;"><a href="#" class="doorWidth">\u0428\u0438\u0440\u0438\u043d\u0430 \u0434\u0432\u0435\u0440\u0438</a> </li>').appendTo(this.conMenu):
"div"===b&&$('<li style="border-radius: 4px;"><a href="#" class="delDiv">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</a> </li>').appendTo(this.conMenu),this.conMenu.css("top",f+15+"px").css("left",d+"px").show(),!0)};
Menu.prototype.saveOrder=function(a){a=this.parent.save();var b={save:!0,order:JSON.stringify(a)};window.localStorage.setItem("COUPE",JSON.stringify(a));c.load("post","controller.php",b).then(function(a){$("#grey").hide();$("#loading").hide();var b=a.content;a=a.name;var e=document.createElement("a");e.href="data:application/zip;base64, "+b;e.target="_blank";e.download="order.nmc";void 0!==a&&(e.download=a);e.click()}).catch(function(a){Core.Alert(a)})};
Menu.prototype.resetOrder=function(a){window.localStorage.removeItem("COUPE");window.location.reload()};Menu.prototype.calcOrder=function(a){};
Menu.prototype.clickEventHandler=function(a){var b=a.target;if(b.classList.contains("dividers"))return a.stopPropagation(),b.classList.contains("active")?(b.classList.remove("active"),this.activeDivType=null):((a=this.node.querySelector(".dividers").querySelector(".active"))&&a.classList.remove("active"),b.classList.add("active"),this.activeDivType=b.getAttribute("data-divtype")),!0;if(b.classList.contains("reset"))return this.node.dispatchEvent(this.resetEv),!0;this.resetDiv()};
Menu.prototype.changeEventHandler=function(a){a=a.target;var b="gpType gpColor numDoors divType dov stub picture".split(" "),e;if(a.classList)for(e in a.classList.contains("gpType")&&this.updateColor(),b)a.classList.contains(b[e])&&this.node.dispatchEvent(this.updateEv)};Menu.prototype.keyupEventHandler=function(a){a=a.target;var b=!1;a.classList&&(a.classList.contains("pheight")?b=this.checkHeight(a):a.classList.contains("pwidth")&&(b=this.checkWidth(a))&&this.calcNumDoors(),b&&this.node.dispatchEvent(this.updateEv))};
Menu.prototype.checkHeight=function(a){var b=a.value;if(5200<b||800>b)return a.parentNode.classList.add("error"),!1;a.parentNode.classList.remove("error");return!0};Menu.prototype.checkWidth=function(a){var b=a.value;if(800>b||5700<b)return a.parentNode.classList.add("error"),!1;a.parentNode.classList.remove("error");return!0};
Menu.prototype.calcNumDoors=function(){var a=this.node.querySelector(".numDoors"),b=a.value,e=this.width(),d=Math.ceil(e/1250);e=Math.floor(e/400);var f='<option value="1"  data-checker = "false">1</option><option value="2"  data-checker = "false">2</option><option value="3"  data-checker = "false">3</option>';1==d&&(d+=1);2==d&&(d+=1);for(3==d&&(d+=1);d<=e;d++)f+='<option value="'+d+'"  data-checker = "false">'+d+"</option>",d%2||2==d||(f+='<option value="'+d+'" data-checker = "true">='+d+"=</option>");
a.innerHTML=f;for(var g in a.options)a[g].value==b&&(a.value=b)};Menu.prototype.updateColor=function(){var a,b="",e=this.node.querySelector(".gpType").value,d=this.node.querySelector(".gpColor");for(a in this.menuStruct[e].color)b+='<option value="'+a+'">'+this.menuStruct[e].color[a]+"</option>";d.innerHTML=b};
Menu.prototype.config=function(){return{type:+this.type(),color:+this.color(),gnu:+this.divType(),dov:this.dov(),stub:this.stub(),picture:this.picture(),pheight:+this.height(),pwidth:+this.width(),numDoors:+this.numDoors(),gnuSize:53==this.divType()?1:7,varWidth:+this.varWidth(),insertVar:+this.insertVar(),horizVar:+this.horizVar(),checker:this.isChecker()}};Menu.prototype.resetDiv=function(){this.activeDivType=null;var a=this.node.querySelector(".dividers").querySelector(".active");a&&a.classList.remove("active")};
